import{r as e,j as t,a as n,O as s,b as i,R as r,c as o,d as a,B as h}from"./vendor.3f842393.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var l={},c=e.exports;function u(){return t("header",{className:"bg-blue-600 text-white p-4 shadow-md",children:t("div",{className:"container mx-auto",children:t("h1",{className:"text-2xl font-bold",children:"The Interpreter"})})})}function p(){const e=(new Date).getFullYear();return t("footer",{className:"bg-gray-800 text-white p-4 mt-auto",children:t("div",{className:"container mx-auto text-center",children:n("p",{children:["Â© ",e," cht_z. All rights reserved."]})})})}function m(){return n("div",{className:"flex flex-col min-h-screen",children:[t(u,{}),t("main",{className:"flex-grow container mx-auto p-4",children:t(s,{})}),t(p,{})]})}function d({source:e,onSourceChange:s,onRun:i}){return n("div",{className:"border border-gray-300 rounded-md h-full flex flex-col",children:[n("div",{className:"flex justify-between items-center p-2 bg-gray-100 border-gray-300",children:[t("h3",{className:"font-medium",children:"Source Code"}),n("button",{className:"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600 flex items-center",onClick:i,"aria-label":"Run code",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Run"]})]}),t("textarea",{className:"flex-grow p-4 font-mono text-sm resize-none focus:outline-none",placeholder:"// Write your code here...",value:e,onChange:e=>s(e.target.value),"aria-label":"Source code editor",spellCheck:"false"})]})}function f({output:e}){return n("div",{className:"border border-gray-300 rounded-md h-full flex flex-col",children:[t("div",{className:"bg-gray-100 p-2 border-b border-gray-300",children:t("h3",{className:"font-medium",children:"Console Output"})}),t("div",{className:"flex-grow bg-gray-900 p-4 font-mono text-sm text-green-400 overflow-y-auto",role:"log","aria-live":"polite","aria-label":"Console output",children:t("div",{className:"whitespace-pre-wrap",children:e})})]})}function k({jsonData:e,onJsonChange:s}){return n("div",{className:"border border-gray-300 rounded-md h-full flex flex-col",children:[t("div",{className:"bg-gray-100 p-2 border-b border-gray-300",children:t("h3",{className:"font-medium",children:"JSON Data"})}),t("textarea",{className:"flex-grow p-4 font-mono text-sm resize-none focus:outline-none bg-gray-50",placeholder:"{}",value:e,onChange:e=>s(e.target.value),"aria-label":"JSON data editor",spellCheck:"false"})]})}l.createRoot=c.createRoot,l.hydrateRoot=c.hydrateRoot;const x="EOF",g="ILLEGAL",y="IDENTIFIER",v="NUMBER",w="STRING",T="DEF",b="LET",S="IF",E="ELSE",N="WHILE",I="RETURN",C="TRUE",P="FALSE",O="NULL",J="+",F="-",$="*",L="/",A="%",j="==",D="!=",R="<",B=">",_="<=",z=">=",U="&&",M="||",W="!",V="=",q=",",H=";",G="(",K=")",Y="{",Z="}",Q=".",X="[",ee="]",te={def:T,let:b,if:S,else:E,while:N,return:I,true:C,false:P,null:O};class ne{constructor(e,t,n,s){this.type=e,this.literal=t,this.line=n,this.column=s}toString(){return`Token(${this.type}, '${this.literal}', ${this.line}:${this.column})`}}class se{constructor(e){this.input=e,this.position=0,this.readPosition=0,this.ch="",this.line=1,this.column=0,this.readChar()}readChar(){this.readPosition>=this.input.length?this.ch="":this.ch=this.input[this.readPosition],this.position=this.readPosition,this.readPosition+=1,this.column+=1}peekChar(){return this.readPosition>=this.input.length?"":this.input[this.readPosition]}nextToken(){let e;switch(this.skipWhitespace(),this.skipComments(),this.ch){case"=":if("="===this.peekChar()){const t=this.ch;this.readChar();const n=t+this.ch;e=new ne(j,n,this.line,this.column-1)}else e=new ne(V,this.ch,this.line,this.column);break;case"+":e=new ne(J,this.ch,this.line,this.column);break;case"-":e=new ne(F,this.ch,this.line,this.column);break;case"*":e=new ne($,this.ch,this.line,this.column);break;case"#":return this.skipComments(),this.nextToken();case"/":if("/"===this.peekChar()||"*"===this.peekChar())return this.skipComments(),this.nextToken();e=new ne(L,this.ch,this.line,this.column);break;case"%":e=new ne(A,this.ch,this.line,this.column);break;case"!":if("="===this.peekChar()){const t=this.ch;this.readChar();const n=t+this.ch;e=new ne(D,n,this.line,this.column-1)}else e=new ne(W,this.ch,this.line,this.column);break;case"<":if("="===this.peekChar()){const t=this.ch;this.readChar();const n=t+this.ch;e=new ne(_,n,this.line,this.column-1)}else e=new ne(R,this.ch,this.line,this.column);break;case">":if("="===this.peekChar()){const t=this.ch;this.readChar();const n=t+this.ch;e=new ne(z,n,this.line,this.column-1)}else e=new ne(B,this.ch,this.line,this.column);break;case"&":if("&"===this.peekChar()){const t=this.ch;this.readChar();const n=t+this.ch;e=new ne(U,n,this.line,this.column-1)}else e=new ne(g,this.ch,this.line,this.column);break;case"|":if("|"===this.peekChar()){const t=this.ch;this.readChar();const n=t+this.ch;e=new ne(M,n,this.line,this.column-1)}else e=new ne(g,this.ch,this.line,this.column);break;case",":e=new ne(q,this.ch,this.line,this.column);break;case";":e=new ne(H,this.ch,this.line,this.column);break;case".":e=new ne(Q,this.ch,this.line,this.column);break;case"(":e=new ne(G,this.ch,this.line,this.column);break;case")":e=new ne(K,this.ch,this.line,this.column);break;case"{":e=new ne(Y,this.ch,this.line,this.column);break;case"}":e=new ne(Z,this.ch,this.line,this.column);break;case'"':case"'":const t=this.column,n=this.readString(this.ch);e=new ne(w,n,this.line,t);break;case"":e=new ne(x,"",this.line,this.column);break;case"[":e=new ne(X,this.ch,this.line,this.column);break;case"]":e=new ne(ee,this.ch,this.line,this.column);break;default:if(this.isLetter(this.ch)){const t=this.column,n=this.readIdentifier();return e=new ne(te[n]||y,n,this.line,t),e}if(this.isDigit(this.ch)){const t=this.column,n=this.readNumber();return e=new ne(v,n,this.line,t),e}e=new ne(g,this.ch,this.line,this.column)}return this.readChar(),e}readIdentifier(){const e=this.position;for(;this.isLetter(this.ch)||this.isDigit(this.ch);)this.readChar();return this.input.slice(e,this.position)}readNumber(){const e=this.position;for(;this.isDigit(this.ch);)this.readChar();if("."===this.ch&&this.isDigit(this.peekChar()))for(this.readChar();this.isDigit(this.ch);)this.readChar();return this.input.slice(e,this.position)}readString(e){this.readChar();const t=this.position;for(;this.ch!==e&&""!==this.ch;)"\\"!==this.ch||this.peekChar()!==e&&"\\"!==this.peekChar()||this.readChar(),"\n"===this.ch&&(this.line++,this.column=0),this.readChar();return this.input.slice(t,this.position)}skipWhitespace(){for(;" "===this.ch||"\t"===this.ch||"\r"===this.ch||"\n"===this.ch;)"\n"===this.ch&&(this.line++,this.column=0),this.readChar()}skipComments(){if("#"===this.ch||"/"===this.ch&&"/"===this.peekChar()){for(;"\n"!==this.ch&&""!==this.ch;)this.readChar();this.skipWhitespace()}else if("/"===this.ch&&"*"===this.peekChar()){this.readChar(),this.readChar();let e=!1;for(;!e&&""!==this.ch;)"*"===this.ch&&"/"===this.peekChar()?(e=!0,this.readChar(),this.readChar()):("\n"===this.ch&&(this.line++,this.column=0),this.readChar());this.skipWhitespace()}}isLetter(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e}isDigit(e){return"0"<=e&&e<="9"}tokenize(){const e=[];let t=this.nextToken();for(;t.type!==x;)e.push(t),t=this.nextToken();return e.push(t),e}}class ie{constructor(e){this.value=e}}class re{constructor(e,t,n=!1){this.name=e,this.implementation=t,this.isAsync=n}}class oe extends Error{constructor(e,t,n){super(e),this.line=t||0,this.column=n||0,this.name="RuntimeError"}}class ae{constructor(e=null){this.parent=e,this.values=new Map,this.libraryFunctions=new Map}extend(){return new ae(this)}define(e,t){return this.values.set(e,t),t}get(e,t){if(this.values.has(e))return this.values.get(e);if(this.libraryFunctions.has(e))return this.libraryFunctions.get(e);if(this.parent)return this.parent.get(e,t);throw new oe(`Undefined variable '${e}'`,null==t?void 0:t.line,null==t?void 0:t.column)}assign(e,t,n){if(this.values.has(e))return this.values.set(e,t),t;if(this.parent)return this.parent.assign(e,t,n);throw new oe(`Cannot assign to undefined variable '${e}'`,null==n?void 0:n.line,null==n?void 0:n.column)}registerLibraryFunction(e,t,n=!1){const s=new re(e,t,n);return this.libraryFunctions.set(e,s),s}}class he{constructor(e={},t=[]){this.variables={},this.jsonData=e,this.consoleOutput=t,this.functions={},this.asyncFunctions=new Set,this.environment=new ae}getEnvironment(){return this.environment}stringify(e){return null===e?"null":void 0===e?"undefined":"object"==typeof e?JSON.stringify(e):String(e)}lookupVariable(e){if(e in this.variables)return this.variables[e];if(e in this.functions)return this.functions[e];try{if(this.environment)return this.environment.get(e)}catch(t){}throw new oe(`Undefined variable '${e}'`,0,0)}assignVariable(e,t){return this.variables[e]=t,t}lookupFunction(e){return e in this.functions?this.functions[e]:null}isAsyncFunction(e){return this.asyncFunctions.has(e)}registerFunction(e,t,n=!1){const s=(...e)=>{if(1===e.length&&Array.isArray(e[0])){return e[0].some((e=>"object"==typeof e&&null!==e&&(e.type||Array.isArray(e))))?t(...e[0]):t(e[0])}return t(...e)};return this.functions[e]=s,n&&this.asyncFunctions.add(e),s}io_get(e){if(e in this.jsonData){const t=this.jsonData[e];return Array.isArray(t)?[...t]:t}return null}io_put(e,t){let n,s;return Array.isArray(e)&&void 0===t?[n,s]=e:(n=e,s=t),this.jsonData[n]=s,s}console_put(e){const t=Array.isArray(e)&&1===e.length?e[0]:e;return this.consoleOutput.push(this.stringify(t)),t}createChildContext(){const e=new he(this.jsonData,this.consoleOutput);return Object.keys(this.functions).forEach((t=>{e.functions[t]=this.functions[t],this.asyncFunctions.has(t)&&e.asyncFunctions.add(t)})),e}}class le{constructor(){this.position={line:0,column:0}}toString(){return this.constructor.name}toJSON(){return{type:this.constructor.name,...this}}async evaluate(e){throw new Error(`${this.constructor.name} does not implement evaluate()`)}}class ce extends le{constructor(){super(),this.statements=[]}toJSON(){return{type:"Program",statements:this.statements.map((e=>e.toJSON()))}}async evaluate(e){let t=null;for(const n of this.statements)if(t=await n.evaluate(e),t instanceof ie)return t.value;return t}}class ue extends le{constructor(){super(),this.statements=[]}toJSON(){return{type:"BlockStatement",position:this.position,statements:this.statements.map((e=>e.toJSON()))}}async evaluate(e){let t=null;for(const n of this.statements)if(t=await n.evaluate(e),t instanceof ie)return t;return t}}class pe extends le{constructor(e){super(),this.expression=e}toJSON(){return{type:"ExpressionStatement",position:this.position,expression:this.expression?this.expression.toJSON():null}}async evaluate(e){return await this.expression.evaluate(e)}}class me extends le{constructor(e,t){super(),this.name=e,this.initializer=t}toJSON(){return{type:"VariableDeclaration",position:this.position,name:this.name,initializer:this.initializer?this.initializer.toJSON():null}}async evaluate(e){const t=this.initializer?await this.initializer.evaluate(e):null;return e.getEnvironment().define(this.name,t)}}class de extends le{constructor(e,t){super(),this.name=e,this.value=t}toJSON(){return{type:"AssignmentStatement",position:this.position,name:this.name,value:this.value?this.value.toJSON():null}}async evaluate(e){const t=await this.value.evaluate(e);return e.getEnvironment().assign(this.name,t,this.position)}}class fe extends le{constructor(e,t,n){super(),this.name=e,this.parameters=t||[],this.body=n}toJSON(){return{type:"FunctionDeclaration",position:this.position,name:this.name,parameters:this.parameters,body:this.body?this.body.toJSON():null}}async evaluate(e){return e.getEnvironment().define(this.name,(async t=>{const n=e.getEnvironment().extend();for(let e=0;e<this.parameters.length;e++){const s=this.parameters[e],i=e<t.length?t[e]:null;n.define(s,i)}const s=e.environment;let i;e.environment=n;try{i=await this.body.evaluate(e)}finally{e.environment=s}return i instanceof ie?i.value:i}))}}class ke extends le{constructor(e){super(),this.value=e}toJSON(){return{type:"ReturnStatement",position:this.position,value:this.value?this.value.toJSON():null}}async evaluate(e){const t=this.value?await this.value.evaluate(e):null;return new ie(t)}}class xe extends le{constructor(e,t,n){super(),this.condition=e,this.consequence=t,this.alternative=n}toJSON(){return{type:"IfStatement",position:this.position,condition:this.condition?this.condition.toJSON():null,consequence:this.consequence?this.consequence.toJSON():null,alternative:this.alternative?this.alternative.toJSON():null}}async evaluate(e){return Pe(await this.condition.evaluate(e))?await this.consequence.evaluate(e):this.alternative?await this.alternative.evaluate(e):null}}class ge extends le{constructor(e,t){super(),this.condition=e,this.body=t}toJSON(){return{type:"WhileStatement",position:this.position,condition:this.condition?this.condition.toJSON():null,body:this.body?this.body.toJSON():null}}async evaluate(e){let t=null;for(;Pe(await this.condition.evaluate(e));)if(t=await this.body.evaluate(e),t instanceof ie)return t;return t}}class ye extends le{constructor(e){super(),this.name=e}toJSON(){return{type:"Identifier",position:this.position,name:this.name}}async evaluate(e){try{return e.lookupVariable(this.name)}catch(t){try{if(e.getEnvironment)return e.getEnvironment().get(this.name,this.position)}catch(n){}throw new oe(`Undefined variable '${this.name}'`,this.position.line,this.position.column)}}}class ve extends le{constructor(e){super(),this.value=e}toJSON(){return{type:"NumberLiteral",position:this.position,value:this.value}}async evaluate(e){return this.value}}class we extends le{constructor(e){super(),this.value=e}toJSON(){return{type:"StringLiteral",position:this.position,value:this.value}}async evaluate(e){return this.value}}class Te extends le{constructor(e){super(),this.value=e}toJSON(){return{type:"BooleanLiteral",position:this.position,value:this.value}}async evaluate(e){return this.value}}class be extends le{constructor(){super()}toJSON(){return{type:"NullLiteral",position:this.position}}async evaluate(e){return null}}class Se extends le{constructor(e,t){super(),this.operator=e,this.right=t}toJSON(){return{type:"PrefixExpression",position:this.position,operator:this.operator,right:this.right?this.right.toJSON():null}}async evaluate(e){const t=await this.right.evaluate(e);switch(this.operator){case"-":return-t;case"!":return!Pe(t);default:throw new oe(`Unknown prefix operator: ${this.operator}`,this.position.line,this.position.column)}}}class Ee extends le{constructor(e,t,n){super(),this.left=e,this.operator=t,this.right=n}toJSON(){return{type:"InfixExpression",position:this.position,left:this.left?this.left.toJSON():null,operator:this.operator,right:this.right?this.right.toJSON():null}}async evaluate(e){const t=await this.left.evaluate(e);if("&&"===this.operator)return Pe(t)?await this.right.evaluate(e):t;if("||"===this.operator)return Pe(t)?t:await this.right.evaluate(e);const n=await this.right.evaluate(e);switch(this.operator){case"+":return"string"==typeof t||"string"==typeof n?String(t)+String(n):t+n;case"-":return t-n;case"*":return t*n;case"/":if(0===n)throw new oe("Division by zero",this.position.line,this.position.column);return t/n;case"%":if(0===n)throw new oe("Modulo by zero",this.position.line,this.position.column);return t%n;case"<":return t<n;case">":return t>n;case"<=":return t<=n;case">=":return t>=n;case"==":return t===n;case"!=":return t!==n;default:throw new oe(`Unknown infix operator: ${this.operator}`,this.position.line,this.position.column)}}}class Ne extends le{constructor(e,t){super(),this.callee=e,this.arguments=t||[]}toJSON(){return{type:"CallExpression",callee:this.callee?this.callee.toJSON():null,arguments:this.arguments.map((e=>e.toJSON()))}}async evaluate(e){const t=[];for(const i of this.arguments)try{const n=await i.evaluate(e);t.push(n)}catch(s){throw s}let n;try{n=await this.callee.evaluate(e)}catch(s){throw s}if(n instanceof re)return n.isAsync?await n.implementation(...t):n.implementation(...t);if("function"==typeof n){const s=this.callee.name;return s&&e.isAsyncFunction&&e.isAsyncFunction(s)?await n(t):n(t)}throw new oe(`Cannot call non-function: ${e.stringify(n)}`,this.position.line,this.position.column)}}class Ie extends le{constructor(e,t,n=!1){super(),this.object=e,this.property=t,this.computed=n}toJSON(){return{type:"MemberExpression",position:this.position,object:this.object?this.object.toJSON():null,property:this.property?this.property.toJSON():null,computed:this.computed}}async evaluate(e){const t=await this.object.evaluate(e);let n;if(n=this.computed?await this.property.evaluate(e):this.property.name,null==t)throw new Error("Cannot access property of null or undefined");return t[n]}}class Ce extends le{constructor(e=[]){super(),this.elements=e}toJSON(){return{type:"ArrayLiteral",position:this.position,elements:this.elements.map((e=>e?e.toJSON():null))}}async evaluate(e){const t=[];for(const n of this.elements)t.push(await n.evaluate(e));return t}}function Pe(e){return null!==e&&("boolean"==typeof e?e:"number"==typeof e?0!==e:"string"!=typeof e||e.length>0)}const Oe=1,Je=4,Fe=5,$e=6,Le=7,Ae=8,je=10,De={[M]:2,[U]:3,[j]:Je,[D]:Je,[R]:Fe,[B]:Fe,[_]:Fe,[z]:Fe,[J]:$e,[F]:$e,[$]:Le,[L]:Le,[A]:Le,[G]:9,[Q]:je,[X]:je};class Re{constructor(e){this.lexer=e,this.tokens=[],this.currentPosition=0,this.errors=[],this.nextToken(),this.nextToken(),this.prefixParseFns=new Map,this.infixParseFns=new Map,this.registerPrefix(y,this.parseIdentifier.bind(this)),this.registerPrefix(v,this.parseNumberLiteral.bind(this)),this.registerPrefix(w,this.parseStringLiteral.bind(this)),this.registerPrefix(C,this.parseBooleanLiteral.bind(this)),this.registerPrefix(P,this.parseBooleanLiteral.bind(this)),this.registerPrefix(O,this.parseNullLiteral.bind(this)),this.registerPrefix(G,this.parseGroupedExpression.bind(this)),this.registerPrefix(F,this.parsePrefixExpression.bind(this)),this.registerPrefix(W,this.parsePrefixExpression.bind(this)),this.registerPrefix(X,this.parseArrayLiteral.bind(this)),this.registerInfix(J,this.parseInfixExpression.bind(this)),this.registerInfix(F,this.parseInfixExpression.bind(this)),this.registerInfix($,this.parseInfixExpression.bind(this)),this.registerInfix(L,this.parseInfixExpression.bind(this)),this.registerInfix(A,this.parseInfixExpression.bind(this)),this.registerInfix(j,this.parseInfixExpression.bind(this)),this.registerInfix(D,this.parseInfixExpression.bind(this)),this.registerInfix(R,this.parseInfixExpression.bind(this)),this.registerInfix(B,this.parseInfixExpression.bind(this)),this.registerInfix(_,this.parseInfixExpression.bind(this)),this.registerInfix(z,this.parseInfixExpression.bind(this)),this.registerInfix(U,this.parseInfixExpression.bind(this)),this.registerInfix(M,this.parseInfixExpression.bind(this)),this.registerInfix(G,this.parseCallExpression.bind(this)),this.registerInfix(Q,this.parseMemberExpression.bind(this)),this.registerInfix(X,this.parseIndexExpression.bind(this))}parseProgram(){const e=new ce;for(;!this.currentTokenIs(x);){const t=this.parseStatement();t&&e.statements.push(t),this.nextToken()}return e}registerPrefix(e,t){this.prefixParseFns.set(e,t)}registerInfix(e,t){this.infixParseFns.set(e,t)}nextToken(){if(this.currentToken=this.peekToken,this.currentPosition<this.tokens.length)this.peekToken=this.tokens[this.currentPosition],this.currentPosition++;else{const e=this.lexer.nextToken();this.tokens.push(e),this.peekToken=e,this.currentPosition++}}currentTokenIs(e){return this.currentToken&&this.currentToken.type===e}peekTokenIs(e){return this.peekToken&&this.peekToken.type===e}expectPeek(e){return this.peekTokenIs(e)?(this.nextToken(),!0):(this.peekError(e),!1)}peekError(e){var t,n,s;const i=`Expected next token to be ${e}, got ${null==(t=this.peekToken)?void 0:t.type} instead`;this.errors.push({message:i,line:null==(n=this.peekToken)?void 0:n.line,column:null==(s=this.peekToken)?void 0:s.column})}peekPrecedence(){var e;return De[null==(e=this.peekToken)?void 0:e.type]||Oe}currentPrecedence(){var e;return De[null==(e=this.currentToken)?void 0:e.type]||Oe}parseStatement(){switch(this.currentToken.type){case T:return this.parseFunctionDeclaration();case b:return this.parseVariableDeclaration();case S:return this.parseIfStatement();case N:return this.parseWhileStatement();case I:return this.parseReturnStatement();case Y:return this.parseBlockStatement();default:return this.currentTokenIs(y)&&this.peekTokenIs(V)?this.parseAssignmentStatement():this.parseExpressionStatement()}}parseBlockStatement(){var e,t;const n=new ue;for(n.position={line:this.currentToken.line,column:this.currentToken.column},this.nextToken();!this.currentTokenIs(Z)&&!this.currentTokenIs(x);){const e=this.parseStatement();e&&n.statements.push(e),this.nextToken()}return this.currentTokenIs(Z)||this.errors.push({message:"Expected '}' at the end of block statement",line:null==(e=this.currentToken)?void 0:e.line,column:null==(t=this.currentToken)?void 0:t.column}),n}parseFunctionDeclaration(){const e=new fe;return e.position={line:this.currentToken.line,column:this.currentToken.column},this.expectPeek(y)?(e.name=this.currentToken.literal,this.expectPeek(G)?(e.parameters=this.parseFunctionParameters(),this.expectPeek(Y)?(e.body=this.parseBlockStatement(),e):null):null):null}parseFunctionParameters(){var e,t;const n=[];if(this.peekTokenIs(K))return this.nextToken(),n;for(this.nextToken(),n.push(this.currentToken.literal);this.peekTokenIs(q);)this.nextToken(),this.nextToken(),this.currentTokenIs(y)?n.push(this.currentToken.literal):this.errors.push({message:"Expected parameter name",line:null==(e=this.currentToken)?void 0:e.line,column:null==(t=this.currentToken)?void 0:t.column});return this.expectPeek(K)?n:null}parseVariableDeclaration(){var e,t;const n=new me;return n.position={line:this.currentToken.line,column:this.currentToken.column},this.expectPeek(y)?(n.name=this.currentToken.literal,this.peekTokenIs(V)&&(this.nextToken(),this.nextToken(),n.initializer=this.parseExpression(Oe)),this.peekTokenIs(H)?this.nextToken():this.errors.push({message:"Expected ';' after variable declaration",line:null==(e=this.peekToken)?void 0:e.line,column:null==(t=this.peekToken)?void 0:t.column}),n):null}parseAssignmentStatement(){var e,t;const n=new de;return n.position={line:this.currentToken.line,column:this.currentToken.column},n.name=this.currentToken.literal,this.nextToken(),this.nextToken(),n.value=this.parseExpression(Oe),this.peekTokenIs(H)?this.nextToken():this.errors.push({message:"Expected ';' after assignment",line:null==(e=this.peekToken)?void 0:e.line,column:null==(t=this.peekToken)?void 0:t.column}),n}parseAssignmentExpression(){const e=new de;return e.position={line:this.currentToken.line,column:this.currentToken.column},e.name=this.currentToken.literal,this.nextToken(),this.nextToken(),e.value=this.parseExpression(Oe),e}parseIfStatement(){var e,t;const n=new xe;return n.position={line:this.currentToken.line,column:this.currentToken.column},this.expectPeek(G)?(this.nextToken(),n.condition=this.parseExpression(Oe),this.expectPeek(K)&&this.expectPeek(Y)?(n.consequence=this.parseBlockStatement(),this.peekTokenIs(E)&&(this.nextToken(),this.peekTokenIs(S)?(this.nextToken(),n.alternative=this.parseIfStatement()):this.peekTokenIs(Y)?(this.nextToken(),n.alternative=this.parseBlockStatement()):this.errors.push({message:"Expected 'if' or '{' after 'else'",line:null==(e=this.peekToken)?void 0:e.line,column:null==(t=this.peekToken)?void 0:t.column})),n):null):null}parseWhileStatement(){const e=new ge;return e.position={line:this.currentToken.line,column:this.currentToken.column},this.expectPeek(G)?(this.nextToken(),e.condition=this.parseExpression(Oe),this.expectPeek(K)&&this.expectPeek(Y)?(e.body=this.parseBlockStatement(),e):null):null}parseReturnStatement(){var e,t;const n=new ke;return n.position={line:this.currentToken.line,column:this.currentToken.column},this.nextToken(),this.currentTokenIs(H)||(n.value=this.parseExpression(Oe)),this.peekTokenIs(H)?this.nextToken():this.errors.push({message:"Expected ';' after return statement",line:null==(e=this.peekToken)?void 0:e.line,column:null==(t=this.peekToken)?void 0:t.column}),n}parseExpressionStatement(){const e=new pe(this.parseExpression(Oe));return e.position={line:this.currentToken.line,column:this.currentToken.column},this.peekTokenIs(H)&&this.nextToken(),e}parseExpression(e){var t,n;const s=this.prefixParseFns.get(this.currentToken.type);if(!s)return this.errors.push({message:`No prefix parse function for ${this.currentToken.type} found`,line:null==(t=this.currentToken)?void 0:t.line,column:null==(n=this.currentToken)?void 0:n.column}),null;let i=s();for(;!this.peekTokenIs(H)&&e<this.peekPrecedence();){const e=this.infixParseFns.get(this.peekToken.type);if(!e)return i;this.nextToken(),i=e(i)}return i}parseIdentifier(){const e=new ye(this.currentToken.literal);return e.position={line:this.currentToken.line,column:this.currentToken.column},e}parseNumberLiteral(){const e=new ve(this.currentToken.literal.includes(".")?parseFloat(this.currentToken.literal):parseInt(this.currentToken.literal,10));return e.position={line:this.currentToken.line,column:this.currentToken.column},e}parseStringLiteral(){const e=new we(this.currentToken.literal);return e.position={line:this.currentToken.line,column:this.currentToken.column},e}parseBooleanLiteral(){const e=new Te(this.currentToken.type===C);return e.position={line:this.currentToken.line,column:this.currentToken.column},e}parseNullLiteral(){const e=new be;return e.position={line:this.currentToken.line,column:this.currentToken.column},e}parseGroupedExpression(){this.nextToken();const e=this.parseExpression(Oe);return this.expectPeek(K)?e:null}parsePrefixExpression(){const e=new Se(this.currentToken.literal,null);return e.position={line:this.currentToken.line,column:this.currentToken.column},this.nextToken(),e.right=this.parseExpression(Ae),e}parseInfixExpression(e){const t=new Ee(e,this.currentToken.literal,null);t.position={line:this.currentToken.line,column:this.currentToken.column};const n=this.currentPrecedence();return this.nextToken(),t.right=this.parseExpression(n),t}parseCallExpression(e){const t=new Ne(e,[]);return t.position={line:this.currentToken.line,column:this.currentToken.column},t.arguments=this.parseCallArguments(),t}parseCallArguments(){return this.parseExpressionList(K)}parseMemberExpression(e){var t,n;const s=new Ie(e,null,!1);return s.position={line:this.currentToken.line,column:this.currentToken.column},this.nextToken(),this.currentTokenIs(y)?(s.property=this.parseIdentifier(),s):(this.errors.push({message:`Expected property name after dot operator, got ${this.currentToken.type}`,line:null==(t=this.currentToken)?void 0:t.line,column:null==(n=this.currentToken)?void 0:n.column}),null)}parseIndexExpression(e){var t,n;const s=new Ie(e,null,!0);return s.position={line:this.currentToken.line,column:this.currentToken.column},this.nextToken(),s.property=this.parseExpression(Oe),this.expectPeek(ee)?s:(this.errors.push({message:"Expected ']' after index expression",line:null==(t=this.peekToken)?void 0:t.line,column:null==(n=this.peekToken)?void 0:n.column}),null)}parseArrayLiteral(){const e=new Ce;return e.position={line:this.currentToken.line,column:this.currentToken.column},e.elements=this.parseExpressionList(ee),e}parseExpressionList(e){const t=[];if(this.peekTokenIs(e))return this.nextToken(),t;for(this.nextToken(),t.push(this.parseExpression(Oe));this.peekTokenIs(q);)this.nextToken(),this.nextToken(),t.push(this.parseExpression(Oe));return this.expectPeek(e)?t:null}}class Be{constructor(){this.ast=null,this.errors=[],this.context=new he,this.registerBuiltInFunctions()}registerBuiltInFunctions(){this.registerFunction("console_put",(e=>this.context.console_put(e))),this.registerFunction("io_get",(e=>this.context.io_get(e))),this.registerFunction("io_put",((e,t)=>this.context.io_put(e,t)))}parse(e){try{const t=new se(e),n=new Re(t);return this.ast=n.parseProgram(),this.errors=n.errors,{success:0===this.errors.length,ast:this.ast,errors:this.errors}}catch(t){return this.errors.push({message:`Unexpected error: ${t.message}`,line:0,column:0}),{success:!1,ast:null,errors:this.errors}}}async evaluate(e={},t=[]){this.errors=[];try{const n=this.context;if(this.context=new he(e,t),n&&n.functions?(this.context.functions={...n.functions},n.asyncFunctions&&(this.context.asyncFunctions=new Set([...n.asyncFunctions]))):this.registerBuiltInFunctions(),!this.ast)return this.errors.push({message:"No AST to evaluate. Parse code first.",line:0,column:0}),{success:!1,result:null,jsonData:e,consoleOutput:t,errors:this.errors};return{success:!0,result:await _e(this.ast,this.context),jsonData:e,consoleOutput:t,errors:[]}}catch(n){return n instanceof oe?this.errors.push({message:n.message,line:n.line,column:n.column}):this.errors.push({message:`Unexpected error: ${n.message}`,line:0,column:0}),{success:!1,result:null,jsonData:e,consoleOutput:t,errors:this.errors}}}registerFunction(e,t,n=!1){return this.context||(this.context=new he),this.context.registerFunction(e,t,n)}getContext(){return this.context}getAstJson(){return this.ast?this.ast.toJSON():null}formatErrors(){return 0===this.errors.length?"No errors":this.errors.map((e=>`[${e.line}:${e.column}] ${e.message}`)).join("\n")}}async function _e(e,t){if(e&&"object"==typeof e&&"function"==typeof e.evaluate)return await e.evaluate(t);if(!e||!e.type){if(e&&(e.statements||e.body)){let n=null;const s=e.statements||e.body;for(const e of s)n=await _e(e,t);return n}throw new Error("Invalid AST node")}switch(e.type){case"Program":{let n=null;const s=e.statements||e.body||[];for(const e of s)n=await _e(e,t);return n}case"NumericLiteral":case"NumberLiteral":case"StringLiteral":return e.value;case"Identifier":{const n=e.name;return t.lookupVariable(n)}case"BinaryExpression":case"InfixExpression":{const n=await _e(e.left,t),s=await _e(e.right,t);switch(e.operator){case"+":return n+s;case"-":return n-s;case"*":return n*s;case"/":return n/s;case"%":return n%s;case"<":return n<s;case">":return n>s;case"<=":return n<=s;case">=":return n>=s;case"==":return n===s;case"!=":return n!==s;case"&&":return n&&s;case"||":return n||s;default:throw new Error(`Unknown binary operator: ${e.operator}`)}}case"UnaryExpression":case"PrefixExpression":{const n=await _e(e.argument||e.right,t);switch(e.operator){case"-":return-n;case"!":return!n;default:throw new Error(`Unknown unary operator: ${e.operator}`)}}case"VariableDeclaration":{const n=e.initializer||e.init,s=n?await _e(n,t):void 0;return t.assignVariable(e.name||e.id&&e.id.name,s)}case"AssignmentExpression":case"AssignmentStatement":{let n;if(e.name)n=e.name;else{if(!e.left||"Identifier"!==e.left.type)throw new Error("Left side of assignment must be an identifier");n=e.left.name}const s=await _e(e.right||e.value,t);return t.assignVariable(n,s)}case"BlockStatement":{let n=null;const s=e.statements||e.body||[];for(const e of s)n=await _e(e,t);return n}case"IfStatement":return await _e(e.test||e.condition,t)?await _e(e.consequent||e.consequence,t):e.alternate||e.alternative?await _e(e.alternate||e.alternative,t):null;case"WhileStatement":{let n=null;const s=e.test||e.condition,i=e.body;for(;await _e(s,t);)n=await _e(i,t);return n}case"CallExpression":{let n=null;if(e.callee&&("string"==typeof e.callee?n=e.callee:"Identifier"===e.callee.type&&(n=e.callee.name)),n){const s=t.lookupFunction(n);if(s){const i=[];for(const n of e.arguments||[])i.push(await _e(n,t));return t.isAsyncFunction&&t.isAsyncFunction(n)?await s(...i):s(...i)}if("io_get"===n&&e.arguments&&1===e.arguments.length){const n=await _e(e.arguments[0],t);return t.io_get(n)}if("io_put"===n&&e.arguments&&2===e.arguments.length){const n=await _e(e.arguments[0],t),s=await _e(e.arguments[1],t);return t.io_put(n,s)}if("console_put"===n&&e.arguments&&e.arguments.length>=1){const n=await _e(e.arguments[0],t);return t.console_put(n)}const i=t.lookupVariable(n);if("object"==typeof i&&null!==i&&"params"in i&&"body"in i){const n=[];for(const i of e.arguments||[])n.push(await _e(i,t));const s=t.createChildContext();for(let e=0;e<i.params.length;e++)s.assignVariable(i.params[e],n[e]||null);for(const e in t.functions)s.registerFunction(e,t.functions[e],t.asyncFunctions&&t.asyncFunctions.has(e));const r=await _e(i.body,s);return r&&"object"==typeof r&&"ReturnValue"===r.type?r.value:r}}throw new Error(`Cannot call non-function: ${n||"unknown"}`)}case"ReturnStatement":return e.argument?await _e(e.argument||e.value,t):null;case"ArrayExpression":{const n=[];for(const s of e.elements||[])n.push(await _e(s,t));return n}case"ObjectExpression":{const n={};for(const s of e.properties||[]){n["Identifier"===s.key.type?s.key.name:await _e(s.key,t)]=await _e(s.value,t)}return n}case"MemberExpression":{const n=await _e(e.object,t),s=e.computed?await _e(e.property,t):e.property.name;if(null==n)throw new Error("Cannot access property of null or undefined");return n[s]}case"ExpressionStatement":return await _e(e.expression,t);default:throw new Error(`Unknown AST node type: ${e.type}`)}}const ze='let hello = io_get("hello");\nif (hello == "Hello World") {\n  hello = "Hallo Welt";\n}\nelse {\n  hello = "Hello World";\n}\nio_put("hello", hello);',Ue='{\n  "hello": "Hello World"\n}';function Me(){const[e,s]=i.exports.useState(ze),[r,o]=i.exports.useState(Ue),[a,h]=i.exports.useState("");return n("div",{className:"flex flex-col h-[calc(100vh-200px)] gap-4",children:[n("div",{className:"flex flex-grow gap-4 min-h-0",children:[t("div",{className:"w-2/3 min-h-0 flex flex-col",children:t(d,{source:e,onSourceChange:s,onRun:async()=>{try{h("$ Parsing program...\n");const n=new Be,s=n.parse(e);if(s.success){h("$ Parsing program...\n$ Parsing successful!\n\n");try{const e=JSON.parse(r),t=[];h("$ Executing program...\n");const s=await n.evaluate(e,t);if(s.success){const e=JSON.stringify(s.jsonData,null,2);o(e);const n=t.map((e=>`> ${e}`)).join("\n");h("$ Program output:\n"+n+"\n\n$ Result: "+(void 0!==s.result?JSON.stringify(s.result):"undefined"))}else{const e=s.errors.map((e=>`[${e.line}:${e.column}] ${e.message}`)).join("\n");h((t=>t+"$ Execution failed!\n\n"+e))}}catch(t){t instanceof SyntaxError&&t.message.includes("JSON")?h((e=>e+`$ JSON parsing error: ${t.message}\n$ Please check your JSON data and try again.`)):h((e=>e+`$ Unexpected error: ${t.message}\n$ Please check your code and try again.`))}}else{const e=s.errors.map((e=>`[${e.line}:${e.column}] ${e.message}`)).join("\n");h("$ Parsing program...\n$ Parsing failed!\n\n"+e)}}catch(t){h(`$ Error: ${t.message}`)}}})}),t("div",{className:"w-1/3 min-h-0",children:t(k,{jsonData:r,onJsonChange:o})})]}),t("div",{className:"h-1/3 min-h-0",children:t(f,{output:a})})]})}function We(){return t("div",{className:"py-6",children:t(Me,{})})}function Ve(){return t(r,{children:t(o,{path:"/",element:t(m,{}),children:t(o,{index:!0,element:t(We,{})})})})}l.createRoot(document.getElementById("root")).render(t(a.StrictMode,{children:t(h,{basename:"/cursorinterpreter/",children:t(Ve,{})})}));
//# sourceMappingURL=index.0e293c52.js.map
